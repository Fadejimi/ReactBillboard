<!DOCTYPE html>
<html>
    <head>
        <!-- React components -->
        <script type="text/javascript" src="js/react/react.min.js"></script>
        <script type="text/javascript" src="js/react/react-dom.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
        <title>Component lifecycle</title>

    </head>

    <body>
        <script type="text/babel">
            var Box = React.createClass({
                getDefaultProps: function() {
                    return {
                        colorIndex: -1
                    }
                },
                getInitialState: function() {
                    return {
                        backgroundColor: "green",
                        height: 200,
                        width: 200
                    }
                },
                update: function() {
                    this.setProps({colorIndex: this.props.colorIndex + 1});
                },
                componentWillReceiveProps: function(nextProps) {
                    var color = this.props.colors.split(',')[nextProps.colorIndex];
                    if (!color) {this.setProps({colorIndex:0})}
                    this.setState({backgroundColor: color});
                },
                render: function() {
                    return (<div style={this.state} onClick={this.update}></div>);
                }
            });

            React.render(<Box colors="Red,Magneta,Salmon,Chartreuse"/>, document.body);
        </script>
    </body>
</html>